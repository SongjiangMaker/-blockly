# 第六章 Blockly的进阶
## 6.1 模块化程序设计
&emsp;一个较大的程序一般应分为若干个程序模块，每一个模块用来实现一个特定的功能。所有的高级语言中都有子程序这个概念，用子程序实现模块的功能。比如在C语言中，子程序的作用是由函数完成的，一个C程序可由一个主函数和若干个函数构成，由主函数调用其它函数，其他函数也可以相互调用，同一个函数可以被一个或多个函数调用任意多次。在Blockly中，也支持函数的定义和使用。
<center><img src="/assets/p126.png"/></center>

&emsp;在程序设计中，常将一些常用的功能模块编写成函数，放在函数库中供公共选用，所以要善于利用函数，以减少重复编写代码的工程量。
### 6.1.1 函数的定义形式
&emsp;在C语言和别的语言中，函数的一个明显的特征就是使用时带括号()，必要的话，括号中还要包含数据和变量，称为参数(Parameter)，参数是函数需要处理的的数据。根据参数的有无，可将函数简单的分为无参函数和有参函数。<br>
&emsp;这段话对于没有接触过C语言或其他编程语言的同学可能比较抽象，不过不必担心，接下来我们会通过Blockly向您详细的解释。<br>
&emsp;<strong>(1)无参函数的定义</strong>
<center><img src="/assets/p127.png"/></center>

&emsp;上图是我们从Blockly工具箱中拖出的一个函数块，其中:对函数进行参数的设置，无参函数不需要用到此选项
<center><img src="/assets/p128.png"/></center>

对工具箱中的Blockly有了简单的了解之后，尝试动手设计自己的函数。
<center><img src="/assets/p129.png"/></center>

&emsp;上图是一个简单的无参函数，它的函数名就叫“无参函数”，当你从工具箱拖动一个块在编辑区的同时，在工具箱中的函数选项卡中会生成一个对应的函数块，当再用到此函数时，就可以像使用其他工具箱中的块一样直接使用。
<center><img src="/assets/p130.png"/></center>

<strong>(2)有参函数的定义</strong>
&emsp;与无参函数不同，有参函数需要在“设置”中对参数进行设置，拖动“输入名称：x”至右侧“输入”中，并对参数进行命名即可。
<center><img src="/assets/p131.png"/></center>

&emsp;同时，像无参函数一样，你也可以在左侧工具箱“函数”选项卡中看到对应的块。
<center><img src="/assets/p132.png"/></center>

<strong>(3)函数的返回值</strong>
&emsp;函数的另外一个明显的特征就是返回值，既然函数可以进行数据处理，那就有必要将将处理结果告诉我们，所以很多函数都有返回值，所谓的返回值就是函数的执行结果。
<center><img src="/assets/p133.png"/></center>

&emsp;当创建的函数需要返回值时，可直接从工具箱中拖动自带返回值的函数块，可见工具箱中生成的函数块左侧带有凸起的连接。
<center><img src="/assets/p134.png"/></center>

&emsp;这种方式生成的函数，只有当函数执行完成后才会返回值，如果在函数执行过程中就已经产生了想要的结果，也可以拖动"如果..返回"结束正在执行的函数，并返回执行结果。<br>
&emsp;<strong>注意：</strong>
&emsp;"如果..返回"在使用时，只有当函数最初设计有返回值时才有返回值，否则只是简单的结束正在执行的函数。
<center><img src="/assets/p135.png"/></center>

&emsp;下面来做一个小练习，设计一个求x, y中最大者的函数，名为Max(x, y)。

<center><img src="/assets/p136.png"/></center>

